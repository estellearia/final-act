<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Act 6 - Final Choice</title>
  <style>
    @font-face {
      font-family: 'Press Start 2P';
      src: url('https://fonts.gstatic.com/s/pressstart2p/v11/e3t4euO8T-267oIAQAu6jDQyKzI.woff2') format('woff2');
    }

    body {
      margin: 0;
      background: #000;
      font-family: 'Press Start 2P', monospace;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      flex-direction: column;
    }

    .screen {
      display: none;
      text-align: center;
      padding: 20px;
      animation: fadeIn 1.5s forwards;
    }

    .fragment {
      width: 40px;
      height: 40px;
      margin: 20px;
      display: inline-block;
      background: #fcd34d;
      border-radius: 50%;
      animation: pixelPulse 1s infinite alternate;
      cursor: pointer;
      position: relative;
    }

    .fragment:hover::after {
      content: attr(data-title);
      position: absolute;
      top: -24px;
      left: 50%;
      transform: translateX(-50%);
      background: #111;
      padding: 5px;
      border: 1px solid #fcd34d;
      font-size: 10px;
      white-space: nowrap;
    }

    .dialogue, #finalChoice p, #mewbyIntro {
      font-size: 12px;
      white-space: pre-line;
      line-height: 1.8;
    }

    .choice-button {
      font-family: 'Press Start 2P';
      background: #fff;
      color: #000;
      border: none;
      padding: 10px 20px;
      margin: 15px;
      cursor: pointer;
    }

    .choice-button:hover {
      background: #fcd34d;
    }

    .aria-sprite {
      width: 80px;
      margin-top: 20px;
      image-rendering: pixelated;
    }

    @keyframes pixelPulse {
      from { box-shadow: 0 0 2px #fcd34d; }
      to { box-shadow: 0 0 12px #fcd34d; }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .typewriter {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
      animation: typing 2.5s steps(40, end);
    }

    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
  </style>
</head>
<body>

<!-- Mewby Intro -->
<div class="screen" id="mewbyIntro">
  <p class="typewriter">Mewby<br>The journey wasnâ€™t perfect.<br>But it was real.<br><br>And look â€” it brought you here.<br>To the person who never stopped waiting.</p>
</div>

<!-- Memory Scene -->
<div class="screen" id="gameContainer">
  <p>Walk up to each memory.</p>
  <div>
    <div class="fragment" data-title="The Break" onclick="collectFragment(0)"></div>
    <div class="fragment" data-title="The Return" onclick="collectFragment(1)"></div>
    <div class="fragment" data-title="The Hard Days" onclick="collectFragment(2)"></div>
  </div>
  <div id="dialogue" class="dialogue"></div>
</div>

<!-- Final Choice -->
<div class="screen" id="finalChoice">
  <p>Mewby</p>
  <p>Youâ€™ve seen it all â€”<br>The good, the bad, and everything in between.<br><br>So...<br>What do you choose?</p>
  <button class="choice-button" onclick="chooseEasy()">Choose Easy</button>
  <button class="choice-button" onclick="chooseHer()">Choose Her</button>
</div>

<!-- Aria Ending -->
<div class="screen" id="ariaScene">
  <img src="https://i.imgur.com/9OC7GRw.gif" alt="Aria" class="aria-sprite"><br><br>
  ðŸ’› You made it.<br><br>
  Through the break, the silence, the doubt.<br>
  You found your way back.<br><br>
  And you chose her.<br><br>
  Thank you for loving me the way you do.<br>
  And just this once... I hope you choose yourself too.<br><br>
  â€” Aria
</div>

<!-- Empty Ending -->
<div class="screen" id="emptyScene">
  (You chose what felt easier. And sometimes, thatâ€™s okay too.)<br><br>
  But some stories never get told that way.
</div>

<!-- Sound Effects -->
<audio id="wind" src="https://cdn.pixabay.com/download/audio/2023/03/27/audio_87d354e5fd.mp3" loop autoplay></audio>
<audio id="sparkle" src="https://cdn.pixabay.com/download/audio/2021/09/17/audio_5b8b555a12.mp3"></audio>

<script>
  const lines = [
    `"We didnâ€™t plan it. It justâ€¦ fell apart."`,
    `"I didnâ€™t expect to see you again â€” but when I did, I saw you differently."`,
    `"It wasnâ€™t easy. But we didnâ€™t give up."`
  ];

  let collected = [false, false, false];

  function collectFragment(index) {
    if (!collected[index]) {
      document.getElementById('dialogue').textContent = lines[index];
      collected[index] = true;
    }

    if (collected.every(Boolean)) {
      setTimeout(() => {
        document.getElementById('gameContainer').style.display = 'none';
        document.getElementById('finalChoice').style.display = 'block';
      }, 1200);
    }
  }

  function chooseEasy() {
    document.getElementById('finalChoice').style.display = 'none';
    document.getElementById('emptyScene').style.display = 'block';
  }

  function chooseHer() {
    document.getElementById('sparkle').play();
    document.getElementById('finalChoice').style.display = 'none';
    document.getElementById('ariaScene').style.display = 'block';
  }

  window.onload = () => {
    document.getElementById('mewbyIntro').style.display = 'block';
    setTimeout(() => {
      document.getElementById('mewbyIntro').style.display = 'none';
      document.getElementById('gameContainer').style.display = 'block';
    }, 8000); // show memories after Mewby intro
  };
</script>

</body>
</html>
