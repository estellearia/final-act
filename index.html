<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Always Choose Her</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(ellipse at bottom, #202040 0%, #0a0a1a 100%);
      color: #fff8e7;
      font-family: 'Press Start 2P', monospace;
      overflow-x: hidden;
      text-align: center;
      min-height: 100vh;
    }

    .scene {
      display: none;
      padding: 40px 20px;
      position: relative;
      z-index: 0;
    }

    .visible {
      display: block;
    }

    .avatar, .aria-sprite {
      width: 100px;
      height: 100px;
      image-rendering: pixelated;
      position: relative;
      z-index: 2;
      margin: 20px auto;
      display: block;
      filter: drop-shadow(0 0 12px #fff6a5);
    }

    .button, .pixel-button {
      font-family: 'Press Start 2P', monospace;
      background-color: rgba(17, 16, 40, 0.7);
      color: #fff8e7;
      border: 2px solid #fff8e7;
      padding: 10px 20px;
      cursor: pointer;
      transition: background 0.3s, border-color 0.3s;
      margin-top: 30px;
      font-size: 12px;
      position: relative;
      z-index: 2;
      display: inline-block;
      margin-right: 10px;
      box-shadow: 0 0 4px #fff8e7, 0 0 16px #3fc0fd inset;
      border-radius: 4px;
      letter-spacing: 1px;
    }

    .button:hover, .pixel-button:hover {
      background-color: #292970;
      border-color: #ffe764;
      color: #ffe764;
      box-shadow: 0 0 12px #ffe764, 0 0 20px #3fc0fd inset;
    }

    /* Starry dreamy background for memories scene */
    #memories {
      position: relative;
      overflow: hidden;
      padding-top: 40px;
      min-height: 350px;
      border-radius: 16px;
      box-shadow: 0 0 60px 16px #1a1a46 inset;
      background: transparent;
      margin: 0 auto;
      max-width: 650px;
    }

    .star-canvas {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .memory-fragment {
      width: 36px;
      height: 36px;
      background: linear-gradient(145deg, #fffbe3 30%, #fcd34d 80%);
      border-radius: 50%;
      margin: 32px 22px;
      display: inline-block;
      animation: glow 1.9s infinite alternate;
      cursor: pointer;
      position: relative;
      z-index: 2;
      box-shadow: 0 0 12px #fffbe3, 0 0 40px #ffe764;
      transition: box-shadow 0.3s, transform 0.2s;
      outline: 2px solid #fffbe3;
      outline-offset: 2px;
    }
    .memory-fragment:hover, .memory-fragment:focus {
      box-shadow: 0 0 26px #ffe764, 0 0 70px #fcd34d;
      transform: scale(1.13);
      z-index: 3;
    }
    .memory-fragment.visited {
      opacity: 0.24;
      pointer-events: none;
      box-shadow: none;
      outline: 1px dashed #ffe764;
      background: #282840;
      transition: opacity 0.5s;
    }

    /* Dreamy title tooltip */
    #tooltip {
      font-size: 13px;
      color: #ffe764;
      margin-top: 16px;
      min-height: 44px;
      white-space: pre-wrap;
      animation: fadeInText 0.3s ease forwards;
      position: relative;
      z-index: 2;
      max-width: 420px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.45;
      text-shadow: 0 0 6px #fffbe3, 0 0 2px #3fc0fd;
      letter-spacing: 1.5px;
      background: rgba(16, 20, 56, 0.52);
      border-radius: 8px;
      padding: 8px 12px;
      border: 1px solid #ffe764;
      box-shadow: 0 0 18px #ffe76433;
      display: none;
    }

    .memory-fragment::after {
      content: attr(data-title);
      position: absolute;
      left: 50%;
      top: -2.4em;
      transform: translateX(-50%);
      font-size: 10px;
      color: #ffe764;
      background: rgba(33, 35, 80, 0.85);
      border-radius: 4px;
      padding: 3px 8px 2px 8px;
      box-shadow: 0 0 8px #ffe76466;
      letter-spacing: 1.5px;
      font-family: 'Press Start 2P', monospace;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
      z-index: 5;
      text-shadow: 0 0 4px #fffbe3;
      border: 1px solid #ffe76488;
      font-weight: bold;
      text-transform: uppercase;
    }
    .memory-fragment:hover::after, .memory-fragment:focus::after {
      opacity: 1;
    }

    @keyframes glow {
      from { box-shadow: 0 0 8px #ffe764, 0 0 20px #fffbe3; }
      to { box-shadow: 0 0 26px #ffe764, 0 0 48px #fcd34d; }
    }

    @keyframes fadeInText {
      to { opacity: 1; }
    }

    /* Final act style */
    #final {
      background: rgba(12, 14, 38, 0.7);
      border-radius: 16px;
      box-shadow: 0 0 32px 2px #fffbe355;
      margin: 0 auto;
      max-width: 440px;
    }

    /* Aria Scene styling */
    .aria-scene {
      padding-top: 40px;
      min-height: 330px;
      max-width: 500px;
      margin: 0 auto;
      background: rgba(14, 16, 38, 0.8);
      border-radius: 16px;
      box-shadow: 0 0 60px #fffbe322, 0 0 140px #3fc0fd22 inset;
      position: relative;
    }
    .message-box {
      font-size: 13px;
      color: #fff8e7;
      background: rgba(36, 38, 80, 0.66);
      border-radius: 10px;
      padding: 16px 14px 24px 14px;
      margin: 0 auto;
      box-shadow: 0 0 10px #ffe76444;
      letter-spacing: 1.2px;
      min-height: 120px;
      line-height: 1.6;
      text-shadow: 0 0 9px #fffbe3;
      border: 1.5px solid #ffe76455;
    }

    /* Dreamy sparkles (static) */
    .sparkle-bg {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    /* Pixelate effect for all */
    .scene,
    .avatar,
    .aria-sprite,
    .button,
    .pixel-button,
    .message-box,
    #tooltip {
      image-rendering: pixelated;
    }
  </style>
</head>
<body>

<!-- Mewby Intro Scene -->
<div id="mewby" class="scene visible">
  <img src="https://64.media.tumblr.com/647ca06c5a608d1ea1c416b21b839ea3/9a98a57c72a06121-2a/s250x400/7f925df3ce70975efc97a7f0ffac27ea3838ae3e.gif" alt="Mewby" class="avatar" />
  <p id="mewbyGreeting" style="min-height: 1.5em"></p>
  <p id="mewbyQuote" style="color: #ffe764; font-size: 10px; margin-top: 20px; min-height: 2em;"></p>
  <button class="button" id="mewbyContinue" onclick="showMemories()" style="display:none;">Continue</button>
</div>

<!-- Memory Selection Scene -->
<div id="memories" class="scene">
  <canvas id="starCanvas" class="star-canvas"></canvas>
  <p style="font-size: 14px; color: #ffe764; text-shadow: 0 0 7px #fffbe3;">Tap each star to remember...</p>
  <div>
    <div class="memory-fragment" data-title="The Break" data-line="The group drifted apart, and silence filled the spaces we once shared. That time still stings." tabindex="1" onclick="visitMemory(this)" title="The Break"></div>
    <div class="memory-fragment" data-title="The Return" data-line="I didn’t expect to see you again — but when I did, I saw you differently." tabindex="2" onclick="visitMemory(this)" title="The Return"></div>
    <div class="memory-fragment" data-title="The Hard Days" data-line="It wasn’t easy. But we didn’t give up." tabindex="3" onclick="visitMemory(this)" title="The Hard Days"></div>
  </div>
  <div id="tooltip" class="tooltip"></div>
</div>

<!-- Final Choice Scene -->
<div id="final" class="scene">
  <p style="font-size: 13px;">You've remembered enough. What will you do?</p>
  <button class="button" id="chooseEasyBtn" onclick="chooseEasy()">Choose Easy</button>
  <button class="button" id="chooseHerBtn" onclick="chooseHer()">Choose Her</button>
</div>

<!-- Aria Scene -->
<div class="scene centered aria-scene" id="ariaScene" style="display:none; position: relative;">
  <div class="sparkle-bg"></div>
  <img src="https://i.imgur.com/9OC7GRw.gif" alt="Aria" class="aria-sprite" />
  <div id="ariaText" class="message-box" style="white-space: pre-wrap; margin: 20px auto; max-width: 400px; min-height: 120px;"></div>
  <button class="pixel-button" id="endButton" style="display:none;" onclick="window.location.href='https://frdffsdx.carrd.co/#home';">
    Return Home
  </button>
</div>

<script>
  // --- 1. TYPING EFFECT ON MEWBY INTRO ---
  const mewbyGreetingText = "Hey, you made it.";
  const mewbyQuoteText = "\"The journey wasn’t perfect. But it was real. And it brought you here.\"";
  let mewbyGreetingIndex = 0;
  let mewbyQuoteIndex = 0;

  function typeMewbyGreeting() {
    const el = document.getElementById('mewbyGreeting');
    if (mewbyGreetingIndex < mewbyGreetingText.length) {
      el.textContent += mewbyGreetingText[mewbyGreetingIndex++];
      setTimeout(typeMewbyGreeting, 32);
    } else {
      setTimeout(() => {
        typeMewbyQuote();
      }, 400);
    }
  }
  function typeMewbyQuote() {
    const el = document.getElementById('mewbyQuote');
    if (mewbyQuoteIndex < mewbyQuoteText.length) {
      el.textContent += mewbyQuoteText[mewbyQuoteIndex++];
      setTimeout(typeMewbyQuote, 23);
    } else {
      setTimeout(() => {
        document.getElementById('mewbyContinue').style.display = 'inline-block';
      }, 400);
    }
  }
  window.addEventListener("DOMContentLoaded", () => {
    typeMewbyGreeting();
    drawStars();
    drawSparkles();
  });

  // --- 2. DREAMY STAR SKY FOR MEMORY SCENE ---
  function drawStars() {
    const canvas = document.getElementById('starCanvas');
    if (!canvas) return;
    // Full size of memories box
    const memoriesDiv = document.getElementById('memories');
    canvas.width = memoriesDiv.offsetWidth;
    canvas.height = 340;
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Draw pixel stars
    for (let i = 0; i < 55; i++) {
      const x = Math.random() * canvas.width;
      const y = Math.random() * canvas.height * 0.9 + 5;
      const size = Math.random() < 0.8 ? 2 : 4;
      ctx.save();
      ctx.globalAlpha = Math.random() * 0.4 + 0.5;
      ctx.fillStyle = Math.random() > 0.5 ? "#ffe764" : "#fffbe3";
      ctx.beginPath();
      ctx.arc(Math.floor(x), Math.floor(y), size, 0, 2 * Math.PI);
      ctx.fill();
      ctx.restore();
    }
  }
  window.addEventListener('resize', function() {
    drawStars();
  });

  // --- Dreamy sparkles for Aria scene ---
  function drawSparkles() {
    const div = document.querySelector('.sparkle-bg');
    if (!div) return;
    div.innerHTML = '';
    for (let i = 0; i < 35; i++) {
      const star = document.createElement('div');
      const s = Math.random() < 0.7 ? 2 : 4;
      Object.assign(star.style, {
        position: 'absolute',
        left: (Math.random() * 98) + '%',
        top: (Math.random() * 92) + '%',
        width: s + 'px',
        height: s + 'px',
        borderRadius: '50%',
        background: Math.random() > 0.5 ? '#ffe764' : '#fffbe3',
        opacity: (Math.random() * 0.4 + 0.5),
        boxShadow: `0 0 8px #ffe76499`,
        animation: `sparkleFade ${1.2 + Math.random()}s infinite alternate`,
        pointerEvents: 'none'
      });
      div.appendChild(star);
    }
  }
  // Add sparkle animation
  const sparkleStyle = document.createElement('style');
  sparkleStyle.innerHTML = `
    @keyframes sparkleFade {
      0% { opacity: 0.5; }
      100% { opacity: 1; }
    }
  `;
  document.head.appendChild(sparkleStyle);

  // --- 3. MEMORY INTERACTION ---
  let memoriesVisited = 0;
  function showMemories() {
    document.getElementById("mewby").classList.remove("visible");
    document.getElementById("memories").classList.add("visible");
  }
  function visitMemory(element) {
    const tooltip = document.getElementById("tooltip");
    const line = element.getAttribute("data-line");

    tooltip.style.display = "block";
    tooltip.textContent = line;
    tooltip.style.opacity = 0;
    setTimeout(() => { tooltip.style.opacity = 1; }, 30);

    if (!element.classList.contains("visited")) {
      element.classList.add("visited");
      memoriesVisited++;
      element.style.opacity = "0.24";
      element.style.pointerEvents = "none";
    }

    if (memoriesVisited >= 3) {
      setTimeout(() => {
        document.getElementById("memories").classList.remove("visible");
        tooltip.textContent = "";
        document.getElementById("final").classList.add("visible");
      }, 1100);
    }
  }

  function chooseHer() {
    document.getElementById("chooseHerBtn").style.display = "none";
    document.getElementById("chooseEasyBtn").style.display = "none";
    showAriaScene();
  }
  function chooseEasy() {
    alert("You chose the easy way out... But this story is about choosing love.");
  }

  // --- 4. FINAL ARIA SCENE: TYPE MESSAGES SEQUENTIALLY ---
  const ariaLines = [
    "You made it.",
    "After everything. Even after how messy things got before.",
    "I still remember how it all fell apart — the group, the friendships, everything.",
    "Back then, it hurt. And we didn’t really talk.",
    "But somehow… you came back into my life. And when you did, I saw you in a way I hadn’t before.",
    "That’s when everything changed. That’s when we started.",
    "And honestly… Even if it means going through all the hard parts again, I’d still choose this. I’d still choose you.",
    "Because being with you — even on the hardest days — means more than any easy version of life without you.",
    "Thank you for loving me when I shut down. When I cry out of nowhere. When I’m not making sense.",
    "You love me on my worst days just as much as my best — and that means everything to me.",
    "I love you. Always.",
  ];
  let ariaIndex = 0;
  let ariaCharIndex = 0;

  function showAriaScene() {
    document.getElementById("final").classList.remove("visible");
    const ariaScene = document.getElementById("ariaScene");
    ariaScene.style.display = "block";
    ariaScene.classList.add("visible");
    ariaIndex = 0;
    ariaCharIndex = 0;
    document.getElementById("ariaText").textContent = "";
    document.getElementById("endButton").style.display = "none";
    typeAriaLine();
  }

  function typeAriaLine() {
    const ariaText = document.getElementById("ariaText");
    if (ariaIndex >= ariaLines.length) {
      document.getElementById("endButton").style.display = "inline-block";
      return;
    }
    ariaText.textContent = "";
    ariaCharIndex = 0;
    let currentLine = ariaLines[ariaIndex];
    function typeChar() {
      if (ariaCharIndex < currentLine.length) {
        ariaText.textContent += currentLine[ariaCharIndex++];
        setTimeout(typeChar, 28);
      } else {
        ariaIndex++;
        setTimeout(typeAriaLine, 900);
      }
    }
    typeChar();
  }
</script>
</body>
</html>
