<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Always Choose Her</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      margin: 0;
      padding: 0;
      background-color: #000011;
      color: white;
      font-family: 'Press Start 2P', monospace;
      text-align: center;
      user-select: none;
      position: relative;
      min-height: 100vh;
    }

    /* Final Aria scene - dreamy pixelated background */
    #ariaScene {
      position: relative;
      padding: 30px 20px 80px;
      max-width: 480px;
      margin: 60px auto 60px;
      background:
        radial-gradient(circle at 20% 20%, #3a3a5e88, transparent 60%),
        radial-gradient(circle at 80% 70%, #5e3a5e88, transparent 60%),
        #000011;
      border: 2px solid #fff;
      border-radius: 8px;
      box-shadow: 0 0 20px #5577cc88 inset;
      color: #eee;
      font-size: 12px;
      line-height: 1.4;
      font-weight: 600;
      text-shadow: 0 0 8px #aabbffcc;
      z-index: 1;
    }

    .sparkle-bg {
      position: absolute;
      top: 10px; left: 50%;
      transform: translateX(-50%);
      width: 140px;
      height: 140px;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(circle 2px at 20% 30%, #fff 90%, transparent),
        radial-gradient(circle 2.5px at 70% 80%, #aaffffcc 90%, transparent),
        radial-gradient(circle 1.5px at 50% 50%, #88ddffcc 90%, transparent),
        radial-gradient(circle 1.2px at 30% 75%, #ffeeccbb 90%, transparent);
      animation: twinkle 6s ease-in-out infinite alternate;
      image-rendering: pixelated;
      filter: drop-shadow(0 0 6px #aaddffaa);
      border-radius: 50%;
    }

    .aria-sprite {
      width: 100px;
      height: 100px;
      image-rendering: pixelated;
      position: relative;
      z-index: 2;
      margin: 20px auto 10px;
      display: block;
      filter: drop-shadow(0 0 4px #7ad);
    }

    /* Stars progress bar */
    .progress-stars {
      margin: 18px auto 30px;
      display: flex;
      justify-content: center;
      gap: 18px;
      min-height: 54px;
      max-width: 340px;
    }
    .progress-star {
      width: 36px;
      height: 36px;
      background: radial-gradient(circle at 38% 38%, #fffacd 73%, #fcd34d 95%);
      border-radius: 50%;
      display: inline-block;
      box-shadow: 0 0 8px #fcd34d, 0 0 20px #ffec6a;
      filter: drop-shadow(0 0 3px #fcd34d);
      transition: box-shadow 0.3s, transform 0.2s, opacity 0.3s;
      opacity: 0.5;
      position: relative;
      border: 1.5px solid #ffe493;
    }
    .progress-star.active {
      opacity: 1;
      box-shadow: 0 0 22px #fffbe3cc, 0 0 40px #ffe493;
      transform: scale(1.08);
      z-index: 2;
    }
    .progress-star.passed {
      opacity: 0.2;
      box-shadow: none;
      filter: none;
      transform: scale(0.97);
    }
    .progress-star .star-num {
      position: absolute;
      bottom: -19px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 8px;
      color: #ffe493;
      text-shadow: 0 0 3px #fffbe3aa;
      pointer-events: none;
    }

    /* Aria message box */
    #ariaText {
      white-space: pre-wrap;
      margin: 25px auto 0;
      max-width: 420px;
      min-height: 140px;
      font-size: 14px;
      font-weight: 600;
      text-shadow: 0 0 6px #aaccee99;
    }

    /* End Button */
    #endButton {
      margin-top: 25px;
      font-size: 12px;
      background-color: transparent;
      border-color: #ffec6a;
      color: #ffec6a;
      box-shadow: 0 0 8px #ffec6a99;
      user-select: none;
    }

    .pixel-button {
      font-family: 'Press Start 2P', monospace;
      border: 2px solid #ffe764;
      border-radius: 5px;
      background: transparent;
      color: #ffe764;
      box-shadow: 0 0 6px #ffe76470, 0 2px 0 0 #353a5c;
      padding: 7px 19px;
      cursor: pointer;
      font-size: 10px;
      font-weight: bold;
      text-shadow: 1px 1px 0 #353a5c, 0 0 6px #fffbe3b5;
      letter-spacing: 1.5px;
      transition: background 0.13s, color 0.13s, border-color 0.13s, transform 0.07s;
      image-rendering: pixelated;
      position: relative;
      z-index: 1;
    }
    .pixel-button:hover {
      background: #ffe764;
      color: #191830;
      border-color: #fffbe3;
      transform: scale(1.05) translateY(-1px);
      box-shadow: 0 0 14px #ffe764ad, 0 4px 0 0 #353a5c;
    }

    /* Typing cursor style */
    .typing-cursor {
      display: inline-block;
      width: 8px;
      height: 14px;
      background-color: #ffec6a;
      margin-left: 3px;
      animation: blink 1.2s steps(2, start) infinite;
      vertical-align: bottom;
    }
    @keyframes blink {
      0%, 50% { opacity: 1; }
      50.01%, 100% { opacity: 0; }
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.7; }
    }
  </style>
</head>
<body>
  <!-- 3. FINAL CHOOSEHER SCENE WITH STARS PROGRESS BAR -->
  <div id="ariaScene" class="scene visible" aria-live="polite" role="region" aria-label="Final scene with Aria">
    <div class="sparkle-bg" aria-hidden="true"></div>
    <img src="https://i.imgur.com/9OC7GRw.gif" alt="Aria avatar" class="aria-sprite" />
    <div class="progress-stars" id="progressStars"></div>
    <div id="ariaText" aria-atomic="true" aria-live="polite" style="min-height: 140px;"></div>
    <button id="endButton" class="pixel-button" style="display:none;">End</button>
  </div>

  <script>
    // Aria messages
    const ariaMessages = [
      "You are the strongest person I've ever met.",
      "You put others before yourself every single day.",
      "Even when it hurts you.",
      "I wish you would choose yourself sometimes.",
      "But know this:",
      "I will always choose you.",
      "No matter the distance, the hardships, or the silence.",
      "You are my heart's home.",
      "And I am grateful for you.",
      "Always."
    ];

    // Progress stars setup
    const progressStarsEl = document.getElementById('progressStars');
    function renderStars(current) {
      progressStarsEl.innerHTML = '';
      for (let i = 0; i < ariaMessages.length; i++) {
        const star = document.createElement('div');
        star.className = 'progress-star' +
          (i === current ? ' active'
          : i < current ? ' passed' : '');
        // Optionally number the stars
        // let num = document.createElement('div');
        // num.className = 'star-num';
        // num.textContent = i + 1;
        // star.appendChild(num);
        progressStarsEl.appendChild(star);
      }
    }

    const ariaTextEl = document.getElementById('ariaText');
    const endButton = document.getElementById('endButton');

    // Typewriter function for aria messages with cursor
    function typeWriterAria(text, speed = 40) {
      return new Promise((resolve) => {
        let i = 0;
        ariaTextEl.textContent = '';
        const cursor = document.createElement('span');
        cursor.className = 'typing-cursor';
        ariaTextEl.appendChild(cursor);

        function typing() {
          if (i < text.length) {
            ariaTextEl.textContent = text.substring(0, i + 1);
            ariaTextEl.appendChild(cursor);
            i++;
            setTimeout(typing, speed);
          } else {
            resolve();
          }
        }
        typing();
      });
    }

    async function playAriaMessages() {
      for (let idx = 0; idx < ariaMessages.length; idx++) {
        renderStars(idx);
        await typeWriterAria(ariaMessages[idx]);
        await new Promise(r => setTimeout(r, 700));
      }
      renderStars(ariaMessages.length);
      endButton.style.display = 'inline-block';
      endButton.focus();
    }

    playAriaMessages();

    endButton.addEventListener('click', () => {
      alert("Thank you for viewing this gift. Always choose love ❤️");
      // Optionally restart or close
    });
  </script>
</body>
</html>
