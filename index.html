<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Always Choose Her</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: white;
      font-family: 'Press Start 2P', monospace;
      overflow-x: hidden;
      text-align: center;
    }

    .scene {
      display: none;
      padding: 40px 20px;
      position: relative;
      z-index: 0;
    }

    .visible {
      display: block;
    }

    .avatar, .aria-sprite {
      width: 100px;
      height: 100px;
      image-rendering: pixelated;
      position: relative;
      z-index: 2;
      margin: 20px auto;
      display: block;
    }

    .button, .pixel-button {
      font-family: 'Press Start 2P', monospace;
      background-color: black;
      color: white;
      border: 2px solid white;
      padding: 10px 20px;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: 30px;
      font-size: 12px;
      position: relative;
      z-index: 2;
      display: inline-block;
      margin-right: 10px;
    }

    .button:hover, .pixel-button:hover {
      background-color: #444;
    }

    /* Memory fragments as yellow circles */
    #memories {
      position: relative;
      overflow: hidden;
      padding-top: 20px;
    }
    .pixel-stars {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(white 2px, transparent 2px),
        radial-gradient(white 2px, transparent 2px);
      background-position: 0 0, 7.5px 7.5px;
      background-size: 15px 15px;
      opacity: 0.25;
      pointer-events: none;
      animation: twinkle 5s ease-in-out infinite alternate;
      image-rendering: pixelated;
      z-index: 0;
    }

    .memory-fragment {
      width: 30px;
      height: 30px;
      background: #fcd34d; /* yellow */
      border-radius: 50%;
      margin: 30px 15px;
      display: inline-block;
      animation: glow 1.5s infinite alternate;
      cursor: pointer;
      position: relative;
      z-index: 2;
      box-shadow: 0 0 5px #fcd34d;
      transition: box-shadow 0.3s ease;
    }

    .memory-fragment:hover {
      box-shadow: 0 0 20px #fcd34d;
    }
    .memory-fragment.visited {
      opacity: 0.4;
      pointer-events: none;
    }

    /* Tooltip to show memory text */
    #tooltip {
      font-size: 10px;
      color: #FFD700;
      margin-top: 10px;
      min-height: 40px;
      white-space: pre-wrap;
      animation: fadeInText 0.3s ease forwards;
      position: relative;
      z-index: 2;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.2;
    }

    @keyframes glow {
      from { box-shadow: 0 0 5px #fcd34d; }
      to { box-shadow: 0 0 20px #fcd34d; }
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.25; }
      50% { opacity: 0.6; }
    }

    @keyframes fadeInText {
      to { opacity: 1; }
    }
  </style>
</head>
<body>

<!-- Mewby Intro Scene -->
<div id="mewby" class="scene visible">
  <img src="https://64.media.tumblr.com/647ca06c5a608d1ea1c416b21b839ea3/9a98a57c72a06121-2a/s250x400/7f925df3ce70975efc97a7f0ffac27ea3838ae3e.gif" alt="Mewby" class="avatar" />
  <p>Hey, you made it.</p>
  <p style="color: #aaa; font-size: 10px; margin-top: 20px;">
    "The journey wasn’t perfect. But it was real. And it brought you here."
  </p>
  <button class="button" onclick="showMemories()">Continue</button>
</div>

<!-- Memory Selection Scene -->
<div id="memories" class="scene">
  <div class="pixel-stars"></div>
  <p>Tap each memory to remember...</p>
  <div>
    <div class="memory-fragment" data-title="The Break" data-line="The group drifted apart, and silence filled the spaces we once shared. That time still stings." onclick="visitMemory(this)" title="The Break"></div>
    <div class="memory-fragment" data-title="The Return" data-line="I didn’t expect to see you again — but when I did, I saw you differently." onclick="visitMemory(this)" title="The Return"></div>
    <div class="memory-fragment" data-title="The Hard Days" data-line="It wasn’t easy. But we didn’t give up." onclick="visitMemory(this)" title="The Hard Days"></div>
  </div>
  <div id="tooltip" class="tooltip"></div>
</div>

<!-- Final Choice Scene -->
<div id="final" class="scene">
  <p>You've remembered enough. What will you do?</p>
  <button class="button" id="chooseEasyBtn" onclick="chooseEasy()">Choose Easy</button>
  <button class="button" id="chooseHerBtn" onclick="chooseHer()">Choose Her</button>
</div>

<!-- Aria Scene -->
<div class="scene centered aria-scene" id="ariaScene" style="display:none; position: relative;">
  <div class="sparkle-bg"></div>
  <img src="https://i.imgur.com/9OC7GRw.gif" alt="Aria" class="aria-sprite" />
  <div id="ariaText" class="message-box" style="white-space: pre-wrap; margin: 20px auto; max-width: 400px; min-height: 120px;"></div>
  <button class="pixel-button" id="endButton" style="display:none;" onclick="window.location.href='https://frdffsdx.carrd.co/#home';">
    Return Home
  </button>
</div>

<script>
  let memoriesVisited = 0;

  function showMemories() {
    document.getElementById("mewby").classList.remove("visible");
    document.getElementById("memories").classList.add("visible");
    document.getElementById("tooltip").style.display = "block";
  }

  function visitMemory(element) {
    const tooltip = document.getElementById("tooltip");
    const line = element.getAttribute("data-line");

    tooltip.textContent = line;

    if (!element.classList.contains("visited")) {
      element.classList.add("visited");
      memoriesVisited++;
      element.style.opacity = "0.4"; // visually mark visited
      element.style.pointerEvents = "none"; // disable clicking again
    }

    if (memoriesVisited >= 3) {
      setTimeout(() => {
        document.getElementById("memories").classList.remove("visible");
        tooltip.style.display = "none";
        document.getElementById("final").classList.add("visible");
      }, 1000);
    }
  }

  function chooseHer() {
    document.getElementById("chooseHerBtn").style.display = "none";
    document.getElementById("chooseEasyBtn").style.display = "none";
    showAriaScene();
  }

  function chooseEasy() {
    alert("You chose the easy way out... But this story is about choosing love.");
  }

  const ariaLines = [
    "You made it.",
    "After everything. Even after how messy things got before.",
    "I still remember how it all fell apart — the group, the friendships, everything.",
    "Back then, it hurt. And we didn’t really talk.",
    "But somehow… you came back into my life. And when you did, I saw you in a way I hadn’t before.",
    "That’s when everything changed. That’s when we started.",
    "And honestly… Even if it means going through all the hard parts again, I’d still choose this. I’d still choose you.",
    "Because being with you — even on the hardest days — means more than any easy version of life without you.",
    "Thank you for loving me when I shut down. When I cry out of nowhere. When I’m not making sense.",
    "You love me on my worst days just as much as my best — and that means everything to me.",
    "I love you. Always.",
  ];

  let ariaIndex = 0;
  let ariaCharIndex = 0;
  let typingInterval;

  function typeNextChar() {
    const ariaText = document.getElementById("ariaText");
    if (ariaCharIndex < ariaLines[ariaIndex].length) {
      ariaText.textContent += ariaLines[ariaIndex][ariaCharIndex];
      ariaCharIndex++;
    } else {
      clearInterval(typingInterval);
      ariaIndex++;
      if (ariaIndex < ariaLines.length) {
        setTimeout(() => {
          showNextAriaLineButton();
        }, 400);
      } else {
        document.getElementById("endButton").style.display = "inline-block";
      }
    }
  }

  function showNextAriaLineButton() {
    if (!document.getElementById("nextLineBtn")) {
      const btn = document.createElement("button");
      btn.textContent = "Next";
      btn.className = "pixel-button";
      btn.id = "nextLineBtn";
      btn.style.marginTop = "20px";
      btn.onclick = () => {
        btn.remove();
        startTyping();
      };
      document.getElementById("ariaScene").appendChild(btn);
    }
  }

  function startTyping() {
    ariaCharIndex = 0;
    document.getElementById("ariaText").textContent = "";
    typingInterval = setInterval(typeNextChar, 40);
  }

  function showAriaScene() {
    document.getElementById("final").classList.remove("visible");
    const ariaScene = document.getElementById("ariaScene");
    ariaScene.style.display = "block";
    ariaScene.classList.add("visible");
    ariaIndex = 0;
    startTyping();
  }
</script>

</body>
</html>
