<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Always Choose Her</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: white;
      font-family: 'Press Start 2P', monospace;
      overflow-x: hidden;
      text-align: center;
    }

    .scene {
      display: none;
      padding: 40px 20px;
      position: relative;
      z-index: 0;
    }

    .visible {
      display: block;
    }

    .avatar, .aria-sprite {
      width: 100px;
      height: 100px;
      image-rendering: pixelated;
      position: relative;
      z-index: 2;
      margin: 20px auto;
      display: block;
    }

    .button, .pixel-button {
      font-family: 'Press Start 2P', monospace;
      background-color: black;
      color: white;
      border: 2px solid white;
      padding: 10px 20px;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: 30px;
      font-size: 12px;
      position: relative;
      z-index: 2;
      display: inline-block;
    }

    .button:hover, .pixel-button:hover {
      background-color: #444;
    }

    .memory {
      border: 2px solid white;
      padding: 10px;
      margin: 10px auto;
      max-width: 400px;
      cursor: pointer;
      position: relative;
      z-index: 2;
    }

    .memory.visited {
      opacity: 0.4;
    }

    .tooltip {
      font-size: 10px;
      color: #FFD700;
      margin-top: 10px;
      animation: fadeInText 0.3s ease forwards;
      position: relative;
      z-index: 2;
    }

    .message-box, #ariaText {
      background-color: rgba(0, 0, 0, 0.85);
      border: 2px solid white;
      border-radius: 10px;
      box-shadow: 0 0 8px white;
      padding: 20px;
      margin: 20px auto 0 auto;
      max-width: 600px;
      text-align: left;
      font-size: 10px;
      line-height: 1.8;
      font-family: 'Press Start 2P', monospace;
      color: white;
      position: relative;
      z-index: 2;
      min-height: 150px;
    }

    /* Sparkle effect behind Aria */
    .sparkle-bg {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(white 1px, transparent 1px);
      background-size: 10px 10px;
      opacity: 0.05;
      pointer-events: none;
      animation: sparkleMove 10s linear infinite;
      z-index: 1; /* behind avatar and text */
    }

    /* Twinkling stars for Memories scene */
    #memories::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(2px 2px at 10% 20%, white, transparent),
        radial-gradient(1.5px 1.5px at 30% 40%, white, transparent),
        radial-gradient(2px 2px at 50% 10%, white, transparent),
        radial-gradient(1px 1px at 70% 70%, white, transparent),
        radial-gradient(1.8px 1.8px at 80% 50%, white, transparent),
        radial-gradient(1.2px 1.2px at 90% 80%, white, transparent),
        radial-gradient(1.6px 1.6px at 40% 80%, white, transparent),
        radial-gradient(1.4px 1.4px at 60% 60%, white, transparent);
      background-repeat: repeat;
      background-size: 200% 200%;
      animation: twinkle 3s infinite alternate;
      opacity: 0.6;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes sparkleMove {
      from { background-position: 0 0; }
      to { background-position: 100% 100%; }
    }

    @keyframes twinkle {
      0% { opacity: 0.4; }
      50% { opacity: 1; }
      100% { opacity: 0.4; }
    }

    @keyframes fadeInText {
      to { opacity: 1; }
    }
  </style>
</head>
<body>

<!-- Mewby Intro Scene -->
<div id="mewby" class="scene visible">
  <img src="https://i.imgur.com/9OC7GRw.gif" alt="Mewby" class="avatar" />
  <p>Mr Mewby: Hey, you made it.</p>
  <p style="color: #aaa; font-size: 10px; margin-top: 20px;">
    "The journey wasn’t perfect. But it was real. And it brought you here."
  </p>
  <button class="button" onclick="showMemories()">Continue</button>
</div>

<!-- Memory Selection Scene -->
<div id="memories" class="scene">
  <p>Tap each memory to remember...</p>
  <div class="memory" data-title="The Break" data-line="The group drifted apart, and silence filled the spaces we once shared. That time still stings." onclick="visitMemory(this)">The Break</div>
  <div class="memory" data-title="The Return" data-line="I didn’t expect to see you again — but when I did, I saw you differently." onclick="visitMemory(this)">The Return</div>
  <div class="memory" data-title="The Hard Days" data-line="It wasn’t easy. But we didn’t give up." onclick="visitMemory(this)">The Hard Days</div>
  <div id="tooltip" class="tooltip"></div>
</div>

<!-- Final Choice Scene -->
<div id="final" class="scene">
  <p>You've remembered enough. What will you do?</p>
  <button class="button" id="finalChoice" onclick="chooseHer()">Choose Her</button>
</div>

<!-- Aria Scene -->
<div class="scene centered aria-scene" id="ariaScene" style="display:none; position: relative;">
  <div class="sparkle-bg"></div>
  <img src="https://i.imgur.com/9OC7GRw.gif" alt="Aria" class="aria-sprite" />
  <div id="ariaText" class="message-box"></div>
  <button class="pixel-button" id="endButton" style="display:none;" onclick="window.location.href='https://frdffsdx.carrd.co/#home';">
    Return Home
  </button>
</div>

<script>
  // Memory scene tracking
  let memoriesVisited = 0;

  function showMemories() {
    document.getElementById("mewby").classList.remove("visible");
    document.getElementById("memories").classList.add("visible");
  }

  function visitMemory(element) {
    const tooltip = document.getElementById("tooltip");
    const line = element.getAttribute("data-line");

    tooltip.textContent = `"${line}"`;
    tooltip.style.display = "block";

    if (!element.classList.contains("visited")) {
      element.classList.add("visited");
      memoriesVisited++;
    }

    if (memoriesVisited >= 3) {
      setTimeout(() => {
        document.getElementById("memories").classList.remove("visible");
        tooltip.style.display = "none";
        document.getElementById("final").classList.add("visible");
      }, 1000);
    }
  }

  // Final choice to show Aria scene with typed lines
  function chooseHer() {
    document.getElementById("finalChoice").style.display = "none";
    showAriaScene();
  }

  // Typing effect for Aria scene
  const ariaLines = [
    "You made it.",
    "After everything. Even after how messy things got before.",
    "I still remember how it all fell apart — the group, the friendships, everything.",
    "Back then, it hurt. And we didn’t really talk.",
    "But somehow… you came back into my life. And when you did, I saw you in a way I hadn’t before.",
    "That’s when everything changed. That’s when we started.",
    "And honestly… Even if it means going through all the hard parts again, I’d still choose this. I’d still choose you.",
    "Because being with you — even on the hardest days — means more than any easy version of life without you.",
    "Thank you for loving me when I shut down. When I cry out of nowhere. When I’m not making sense.",
    "You love me on my worst days just as much as my best — and that means everything to me.",
    "Some people only want love when it's simple. But I’d go through the hard stuff all over again, as long as it leads me to you.",
    "You’re my home now. My everything.",
    "And just this once… I hope you choose you, too.",
    "Because I’ll keep choosing you. Every time.",
    "",
    "Happy Birthday.",
    "Thank you for coming back.",
    "Thank you for letting me love you now."
  ];

  function showAriaScene() {
    const ariaScene = document.getElementById('ariaScene');
    const ariaText = document.getElementById('ariaText');
    const endButton = document.getElementById('endButton');
    ariaScene.style.display = 'block';
    ariaText.innerHTML = '';
    endButton.style.display = 'none';

    let i = 0;

    function typeLine() {
      if (i < ariaLines.length) {
        const p = document.createElement('p');
        p.textContent = "";
        ariaText.appendChild(p);
        let j = 0;
        const line = ariaLines[i];
        const interval = setInterval(() => {
          if (j < line.length) {
            p.textContent += line[j++];
          } else {
            clearInterval(interval);
            i++;
            setTimeout(typeLine, 300); // pause between lines
          }
        }, 25); // typing speed
      } else {
        endButton.style.display = 'inline-block';
      }
    }

    typeLine();
  }
</script>

</body>
</html>
